---
import Base from "@/layouts/Base.astro";
import Page from "./_page";
import type { DotIllust } from "@/types";
import { getContentsDetail, getListAllContents } from "@/libs/microcms";

interface pathType {
	params: {
		id: string;
	};
}

export const getStaticPaths = async (): Promise<pathType[]> => {
	const response = await getListAllContents<DotIllust>("dot", { fields: ["id"] });
	return response.map((content) => ({
		params: {
			id: content.id
		}
	}));
};

const { id } = Astro.params;
if (id === undefined) {
	return;
}

const dot = await getContentsDetail<DotIllust>("dot", id);
---

<Base><Page dot={dot} /></Base>
